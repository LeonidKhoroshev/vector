
- name: Get Vector distrib
  ansible.builtin.get_url:
    url: https://packages.timber.io/vector/0.35.0/vector-0.35.0-1.x86_64.rpm
    dest: /home/vector-0.35.0-1.x86_64.rpm
    mode: "0777"
- name: Install Vector
  become: true
  ansible.builtin.copy:
    remote_src: true
    src: "/home"
    dest: "/usr/bin/"
    mode: "0777"
    owner: root
    group: root
- name: Create Vector directory
  become: true
  ansible.builtin.file:
    path: "/etc/vector"
    state: directory
    mode: "0777"
    owner: root
    group: root
- name: Vector | Template config
  become: true
  ansible.builtin.template:
    src: templates/vector.j2
    dest: /etc/vector/vector.yml
    mode: "0777"
    owner: root
    group: root
- name: Vector | Create systemd unit
  become: true
  ansible.builtin.template:
    src: templates/vector.j2
    dest: /etc/systemd/system/vector.service
    mode: "0777"
    owner: root
    group: root
  notify: Start Vector
